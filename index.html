<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <style>
       

       body {
        background-color: azure;
        font-family: Open Sans;
       }

       ol {
        background-color: rgba(3, 51, 182, 0.665);
        
        
       }

       .square {
        height: 50px;
        width: 50px;
        text-overflow: ellipsis;
        overflow: clip;
       }
       li {
        border-bottom: 1px solid black;
        margin: 3px;
        padding: 15px;
        box-shadow: 2px 2px 5px black;
        transition: all 1s;
       }

       

       button {
        background-color: white;
        border: 0.8px solid black;
        border-radius: 5px;
        padding: 5px;
       }


    </style>
</head>

<body>
    <h1>Leaderboard</h1>
   <ol id="leaderboard">

   </ol>
   <button onclick="dial.showModal()">Add Player</button>
   <dialog id="dial">
    <h3>Add Place</h3>
    <form>
        <label for="name">Name</label>
        <input type="text" id="name"><br>
        <label for="score">Starting Score</label>
        <input type="number" id="score">
        
    </form>
    <button onclick="add(names.value, scores.value); dial.close(); ">Submit</button>
   </dialog>
   <button onclick="doSomething();">Add Function</button>
   <button onclick="deletes();">Delete Player</button>
   <button onclick="save();">Save functions</button>
   <div id="container">
<h3>Custom Functions</h3>
   </div>

   <dialog id="dial2">
    <h3>Function list</h3>
    <form id="form1">
        <input type="radio" id="changeNum">
        <label for="changeNum">Add Amount</label>
        <br>
        <input type="radio" id="removeNum">
        <label for="removeNum">Remove Amount</label>
        <br>
        <input type="radio" id="automate">
        <label for="automate">Add Players</label>
    </form>
    <button onclick="submit2()">Submit</button>
   </dialog>
    <script>
            let listo = [
                {name: "Person 1", score: 500},
                {name: "Person 2", score: 650},
                {name: "Person 3", score: 200},
            ]

            const temp = document.getElementById("temp")
            const dial = document.getElementById("dial")
            const dial2 = document.getElementById("dial2")
            const names = document.getElementById("name")
            const scores = document.getElementById("score")
            const container = document.getElementById("container")
            const leaderboard = document.getElementById("leaderboard")
            const form1 = document.getElementById("form1")
            const automate = document.getElementById("automate")

            const changeNum = document.getElementById("changeNum")
            const removeNum = document.getElementById("removeNum")

            let automating = false
            function update() {
                leaderboard.innerHTML = ""
            listo.sort((a,b) => b.score - a.score)
 let lis = document.querySelectorAll("li")
            listo.forEach(listo => {
                const li = document.createElement("li")
                li.textContent = `${listo.name}, ${listo.score}`
                leaderboard.appendChild(li)

               lis = document.querySelectorAll("li")
                lis[0].style.backgroundColor = "rgba(255, 226, 0, 0.69)" 
                
               
            })
            lis[1].style.backgroundColor = "lightgrey" 
            lis[2].style.backgroundColor = "rgba(131, 80, 2, 0.63)" 
        }
update()
    

function add(name,score) {
    
    
    listo.push({name, score})
    listo.sort((a,b) => b.score - a.score)
    update()
}
function doSomething() {
    dial2.showModal()
    
}

let point = 0
let newNum;
let playerAsk;
let nameAsk;
let scoreAsk
    document.addEventListener("click", () => {
        
        if (changeNum.checked && point < 1) {
            automating = false
            point++
            const label1 = document.createElement("label")
            label1.innerHTML = "Increase By: "
            newNum = document.createElement("input")
            newNum.type = "number"
            const num = newNum.value
            form1.appendChild(document.createElement("br"))
            form1.appendChild(newNum)
            
        }

        if (removeNum.checked && point < 1) {
            automating = false
            point++
            const label1 = document.createElement("label")
            label1.innerHTML = "Decrease By: "
            form1.appendChild(label1)
            newNum = document.createElement("input")
            newNum.type = "number"
            const num = newNum.value
            form1.appendChild(document.createElement("br"))
            form1.appendChild(newNum)
            
        }

        if (automate.checked && point < 1) {
            point++
            automating = true
            form1.appendChild(document.createElement("br"))
            const label1 = document.createElement("label")

            label1.for = "playerAsk"
            label1.innerHTML = "Player Name: "
            form1.appendChild(label1)
            playerAsk = document.createElement("input")
            playerAsk.id = "playerAsk"
            playerAsk.type = "text"
            form1.appendChild(playerAsk)

form1.appendChild(document.createElement("br"))
const label2 = document.createElement("label")
            label2.innerHTML = "Starting Score: "
            label1.for = "scoreAsk"
            form1.appendChild(label2)
            scoreAsk = document.createElement("input")
            scoreAsk.type = "number"
            scoreAsk.id = "scoreAsk"
            form1.appendChild(scoreAsk)
            form1.appendChild(document.createElement("br"))
const label3 = document.createElement("label")
            label3.innerHTML = "Button Name: "
            form1.appendChild(label3)

            nameAsk = document.createElement("input")
            nameAsk.type = "text"
            nameAsk.id = "nameAsk"
            form1.appendChild(nameAsk)


            
        }
      
        
    })
      function submit2() {
    const button = document.createElement("button")
        button.className = "square"
        if (removeNum.checked) {
            button.innerHTML = "-" + newNum.value
        }
        if (changeNum.checked) {
            button.innerHTML = "+" + newNum.value

        }

        if (automate.checked) {
            button.innerHTML = nameAsk.value
            
        }

        
        container.appendChild(button)
        if (button.textContent.trim() === "" || button.textContent.trim() === "+" ||button.textContent.trim() === "-") {
            button.remove()
        }


         dial2.close()

         button.onclick = function() {
            document.querySelectorAll("li").forEach(li => {
                li.style.cursor = "url('Drawing.png'), pointer"
                li.onclick = function() {
                    console.log("Working")
                    console.log(li.textContent)
                    listo.forEach(listo => {
                        if (`${listo.name}, ${listo.score}` == li.textContent) {
                        
                            
                            if (button.textContent.slice(0,1) === "-") {
                                listo.score -= parseInt(button.textContent.slice(1))
                            }

                            

                            else if (button.textContent.slice(0,1) === "+") {
                                listo.score += parseInt(button.textContent.slice(1))
                            }

                        
                            update()
                        }
                    })
                    if (button.textContent.slice(0,1) !== "+") && button.textContent.slice(0,1) !== "-") {
                        add(playerAsk.value, scoreAsk.value)
                }    
                li.style.cursor = "auto"
                }
            })
         }
}

function deletes() {
    document.querySelectorAll("li").forEach(li => {
                li.style.cursor = "url('Drawing.png'), pointer"
                li.onclick = function() {
                    
                    
                        const indexes = listo.findIndex(item => `${item.name}, ${item.score}` === li.textContent);
                           if (indexes !== -1) {
                            listo.splice(indexes, 1)
                           }

                           li.remove()
                           update()

                             li.style.cursor = "auto"
                        }
  
                    })
              
            } 

                    
                
            


    </script>
</body>

</html>
